{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default
false }}

<style>
  .author-name {
    font-family: "Inter", serif !important;
    font-weight: 600 !important;
    font-size: 2.4rem !important;
    color: #1e293b !important;
    letter-spacing: -0.03em;
    line-height: 1.1;
    margin-bottom: 0.5rem;
  }

  .author-headline {
    font-family: "Inter", serif !important;
    font-size: 1rem !important;
    color: #64748b !important;
    line-height: 1.15;
    margin-left: 0.2rem;
  }
</style>

<article class="prose dark:prose-invert max-w-full">
  <div class="relative">
    <div class="mx-auto p-0">
      <div class="relative overflow-visible pb-20">
        <div class="fixed inset-x-0 top-0 -z-10">
          {{ $useDefault := true }} {{ $homepageImage := "" }} {{ with
          .Site.Params.defaultBackgroundImage }} {{ if or (strings.HasPrefix .
          "http:") (strings.HasPrefix . "https:") }} {{ $homepageImage =
          resources.GetRemote . }} {{ else }} {{ $homepageImage = resources.Get
          . }} {{ end }} {{ end }} {{ with .Site.Params.homepage.homepageImage
          }} {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix .
          "https:") }} {{ $homepageImage = resources.GetRemote . }} {{
          $useDefault = false }} {{ else }} {{ $homepageImage = resources.Get .
          }} {{ $useDefault = false }} {{ end }} {{ end }} {{ if $homepageImage
          }} {{ $style := "" }} {{ $defaultPosition := cond $useDefault
          site.Params.imagePosition false }} {{ with $.Params.imagePosition |
          default $defaultPosition }} {{ $style = printf "object-position: %s;"
          . }} {{ end }}
          <img
            id="background-image"
            class="nozoom mt-0 mr-0 mb-0 ml-0 h-screen w-full object-cover"
            src="{{ $homepageImage.RelPermalink }}"
            role="presentation"
            {{
            if
            $style
            }}style="{{ $style | safeCSS }}"
            {{
            end
            }}
          />
          <div
            class="from-neutral absolute inset-0 h-[1000px] bg-gradient-to-t to-transparent mix-blend-normal dark:from-neutral-800"
          ></div>
          <div
            class="from-neutral absolute inset-0 h-[1000px] bg-gradient-to-t to-neutral-100 opacity-60 mix-blend-normal dark:from-neutral-800 dark:to-neutral-800"
          ></div>

          {{ end }}
        </div>

        {{/* ------------- 新：左右两列容器 ------------- */}}
        <div
          class="relative flex flex-col md:flex-row items-start mt-20 ml-2 gap-6"
        >
          <!-- 左侧：作者信息（保持原样，只包在左列） -->
          <div class="w-full md:w-1/3 flex flex-col items-start">
            {{ with .Site.Params.Author.image }} {{ $authorImage := "" }} {{ if
            or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
            {{ $authorImage = resources.GetRemote . }} {{ else }} {{
            $authorImage = resources.Get . }} {{ end }} {{ if $authorImage }} {{
            $final := $authorImage }} {{ if not $disableImageOptimization }} {{
            $final = $authorImage.Fill (print "288x288 q" (
            $.Site.Params.Author.imagequality | default "96" )) }} {{ end }}
            <img
              class="mb-2 rounded-none author-photo"
              alt="{{ $.Site.Params.Author.name | default `Author` }}"
              src="{{ $final.RelPermalink }}"
              data-zoom-src="{{ $authorImage.RelPermalink }}"
            />
            {{ end }} {{ end }}

            <h1
              class="author-name mb-2 text-neutral-800 dark:text-neutral-200 mt-5"
            >
              {{ .Site.Params.Author.name | default .Site.Title }}
            </h1>

            {{ with .Site.Params.Author.headline }}
            <h2
              class="author-headline mt-0 mb-0 text-neutral-800 dark:text-neutral-300 mt-5"
            >
              {{ . | markdownify }}
            </h2>
            {{ end }}

            <div class="mt-3 mb-10 text-2xl">
              {{ with .Site.Params.Author.links }}
              <div class="flex flex-wrap">
                {{ range $links := . }} {{ range $name, $url := $links }}
                <a
                  class="hover:text-primary-400 text-primary-800 dark:text-primary-200 px-1"
                  href="{{ $url }}"
                  target="_blank"
                  aria-label="{{ $name | title }}"
                  title="{{ $name | title }}"
                  rel="me noopener noreferrer"
                >
                  {{ partial "icon.html" $name }}
                </a>
                {{ end }} {{ end }}
              </div>
              {{ end }}
            </div>

            <section class="prose dark:prose-invert w-full">
              {{ .Content }}
            </section>
          </div>
          <!-- end left column -->

          <!-- 右侧：Recent articles（右侧在 md 及以上占 2/3） -->
          <div class="w-full md:w-2/3 flex flex-col items-start">
            {{/* 右侧直接包含 recent partial；partial 内部决定 card/list
            等实际内容 */}} {{ partial "recent-articles/main.html" . }}
          </div>
          <!-- end right column -->
        </div>
        <!-- end two-column container -->
      </div>
    </div>
  </div>
</article>
 
{{ if .Site.Params.homepage.layoutBackgroundBlur | default false }}
<div
  id="background-blur"
  class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"
></div>
{{ $backgroundBlur := resources.Get "js/background-blur.js" }} {{
$backgroundBlur = $backgroundBlur | resources.Minify | resources.Fingerprint
(.Site.Params.fingerprintAlgorithm | default "sha512") }}
<script
  type="text/javascript"
  src="{{ $backgroundBlur.RelPermalink }}"
  integrity="{{ $backgroundBlur.Data.Integrity }}"
  data-blur-id="background-blur"
  data-image-id="background-image"
  {{
  if
  $homepageImage
  }}data-image-url="{{ $homepageImage.RelPermalink }}"
  {{
  end
  }}
></script>
{{ end }}
