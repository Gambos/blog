<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="false"><head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>SQL Optimisation Guidance &middot; Home Page</title>
    <meta name="title" content="SQL Optimisation Guidance &middot; Home Page">
  

  
  
    <meta name="description" content="How to optimise your SQL">
  
  
    <meta name="keywords" content="example,hugo,">
  
  
  
  <link rel="canonical" href="http://localhost:1313/blog/posts/test/">
  

  
  
    <meta name="author" content="Yao Xiang">
  
  
    
      
        
          <link href="https://github.com/Gambos" rel="me">
        
      
    
      
        
          <link href="https://www.linkedin.com/in/yao-xiang/" rel="me">
        
      
    
  

  
  <meta property="og:url" content="http://localhost:1313/blog/posts/test/">
  <meta property="og:site_name" content="Home Page">
  <meta property="og:title" content="SQL Optimisation Guidance">
  <meta property="og:description" content="How to optimise your SQL">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-17T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-11-17T00:00:00+00:00">
    <meta property="article:tag" content="Example">
    <meta property="article:tag" content="Hugo">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="SQL Optimisation Guidance">
  <meta name="twitter:description" content="How to optimise your SQL">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
    
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/blog/css/main.bundle.min.6e1509b7938d4799db53a42b0623a997f6e414dda035d3adae44a6c4df78c1464dcd330c32f177496f15f3829208f47dab03b07a1b20b3c2fed9843b3c25799e.css"
    integrity="sha512-bhUJt5ONR5nbU6QrBiOpl/bkFN2gNdOtrkSmxN94wUZNzTMMMvF3SW8V84KSCPR9qwOwehsgs8L&#43;2YQ7PCV5ng==">

  
  
  <script
    type="text/javascript"
    src="/blog/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/blog/lib/zoom/zoom.min.umd.b4b722fcb5d42f34f52b30a92f3521b69f403ca9d96d0d6179eb537cb870f5d83fdf1fe836688d95d5c99fefbda4170487711006e56051fa67ea00da10521721.js" integrity="sha512-tLci/LXULzT1KzCpLzUhtp9APKnZbQ1heetTfLhw9dg/3x/oNmiNldXJn&#43;&#43;9pBcEh3EQBuVgUfpn6gDaEFIXIQ=="></script>
  

  
  
  
    
  
  
    
  
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/blog/js/main.bundle.min.e3d337dd3f18427eb20aa355839d583ef6382bc42e34cfe789adb9358d463ef51f53691e32f524259380d4d3add49162f522426784990f3a5dbd39c33c6ed05a.js"
      integrity="sha512-49M33T8YQn6yCqNVg51YPvY4K8QuNM/nia25NY1GPvUfU2keMvUkJZOA1NOt1JFi9SJCZ4SZDzpdvTnDPG7QWg=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/blog/lib/jquery/jquery.slim.min.03cb160e3cfdb2667a2e2c80d283bebcf63ff8bbc4b629c9ab2babf6fae1d0c07ad470edae783efa4fabda2ac01c58d60e63b98b3c336be8208460f08f4354f5.js" integrity="sha512-A8sWDjz9smZ6LiyA0oO&#43;vPY/&#43;LvEtinJqyur9vrh0MB61HDtrng&#43;&#43;k&#43;r2irAHFjWDmO5izwza&#43;gghGDwj0NU9Q=="></script>


























  

  

  

  

  





  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/blog/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/blog/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/blog/favicon-16x16.png">
    <link rel="manifest" href="/blog/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "",
    "name": "SQL Optimisation Guidance",
    "headline": "SQL Optimisation Guidance",
    "description": "How to optimise your SQL",
    
    "inLanguage": "en",
    "url" : "http:\/\/localhost:1313\/blog\/posts\/test\/",
    "author" : {
      "@type": "Person",
      "name": "Yao Xiang"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-11-17T00:00:00\u002b00:00",
    "datePublished": "2025-11-17T00:00:00\u002b00:00",
    
    "dateModified": "2025-11-17T00:00:00\u002b00:00",
    
    "keywords": ["example","hugo"],
    
    "mainEntityOfPage": "true",
    "wordCount": "1871"
  }]
  </script>



  
  

  
  

  
  

  
  

  
  
</head>













  
    
  






  

  
  
  
  <body class="flex flex-col h-screen w-full leading-7 px-2 text-lg text-neutral-900 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"
        style="background-image: url('/blog/img/Frame.jpg'); background-size: cover; background-position: center; background-attachment: fixed; background-repeat: no-repeat;">
 
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

<style>
   
  .header-nav a,
  .header-nav button,
  .main-menu a,
  .nested-menu{
    color: #e4fcff !important;
    font-weight: 100 !important;
    font-size: clamp(0.9rem, 0.9vw, 1.1rem);
    transition: color 0.3s ease;
    line-height: 1.3;
  }

   
  .header-nav a:hover,
  .header-nav button:hover,
  .main-menu a:hover,
  .nested-menu:hover {
    color: #7ca0a4 !important;  
  }

   
  .header-nav a.active-menu {
    color: #e4fcff !important; 
    border-bottom-color: #e4fcff !important;  
  }

   
  .custom-nav-spacing {
     
    gap: clamp(1.25rem, 8vw, 6rem) !important; 
     
    height: auto !important;
    min-height: 0 !important;
    padding-top: 0 !important;
  }
</style> 















<div
  class="main-menu flex items-center justify-between py-0 w-full mx-auto">
  
  
    
    

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
        <a href="/blog/" class="text-base font-custom">
          Home Page
        </a>
      
    </nav>
    
  <nav class="header-nav hidden md:flex items-center custom-nav-spacing">
    
      
        
  <a
  href="/blog/posts/"
  
  class="flex items-center hover:text-primary-200 dark:hover:text-primary-100"
  aria-label="Articles"
  title="">
  
  
    <p class="font-custom">
      Articles
    </p>
  
</a>

      
        
  <a
  href="/blog/projects/"
  
  class="flex items-center hover:text-primary-200 dark:hover:text-primary-100"
  aria-label="Projects"
  title="">
  
  
    <p class="font-custom">
      Projects
    </p>
  
</a>

      
        
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a
      
      aria-label="Gallery"
      class="text-base hover:text-primary-600 dark:hover:text-primary-400 flex items-center"
      title="">
      <p>
        Gallery
      </p>
      <span>
        <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
      </span>
    </a>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
          <a
            href="/blog/illustration/"
            
            aria-label="Illustration"
            class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
            
            <p class="text-sm font-sm font-custom" title="">
              Illustration
            </p>
          </a>
        
      </div>
    </div>
  </div>
</div>


      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-10 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/blog/posts/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Articles"
    title="">
    
    
      <p class="text-bg font-bg">
        Articles
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/blog/projects/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Projects"
    title="">
    
    
      <p class="text-bg font-bg">
        Projects
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href=""
    aria-label="Gallery"
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-bg font-bg" title="">
      Gallery
    </p>
    <span>
      <span class="relative block icon"><svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>
</span>
    </span>
  </a>
</li>

  <li class="mt-1">
    <a
      href="/blog/illustration/"
      
      aria-label="Illustration"
      class="flex items-center hover:text-primary-600 dark:hover:text-primary-400">
      
      <p class="text-sm font-small" title="">
        Illustration
      </p>
    </a>
  </li>

<li class="mb-2"></li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>




  <script>
    (function () {
      var $mainmenu = $(".main-menu");
      var path = window.location.pathname;
      $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
        $(e).children("p").addClass("active");
      });
    })();
  </script>


    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow px-2">
        
  

    <style>
    .single-title {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
      font-weight: 400 !important;  
      font-size: 2.2rem !important;  
      color: #334155 !important;    
      letter-spacing: -0.02em;
      line-height: 1.3;
      margin-bottom: 0.5rem;
    }

    .single-meta {
      font-family: 'Inter', sans-serif !important;
      font-size: 0.95rem !important;  
      color: #7ca0a4 !important;     
      font-weight: 400 !important;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.6rem;
    }
  </style>

  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="single-title mt-0">
        SQL Optimisation Guidance
      </h1>
      <div class="single-meta mt-2 mb-8 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-11-17T00:00:00&#43;00:00">November 17, 2025</time><span class="px-2" style="color: #d3dbe6">&middot;</span><span>1871 words</span><span class="px-2" style="color: #d3dbe6">&middot;</span><span title="Reading time">9 mins</span>
    

    
    
  </div>

  

  
  
    <div class="flex flex-row flex-wrap items-center">
      
        
      
        
          
        
      
        
      
        
          
            
              <a class="relative mt-[0.5rem] me-2" href="/blog/tags/example/">
                <span class="flex cursor-pointer">
  <span
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Example
  </span>
</span>

              </a>
            
              <a class="relative mt-[0.5rem] me-2" href="/blog/tags/hugo/">
                <span class="flex cursor-pointer">
  <span
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Hugo
  </span>
</span>

              </a>
            
          
        
      
    </div>
  

  
  



      </div>
      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          <ol>
<li>How to optimise SQL &ndash; Use Explain plan
a)	What is the Explain Plan?
An execution plan describes how the database engine executes a SQL statement â€” the path it takes through indexes, joins, and tables. It can be overridden by using a hint in query.</li>
</ol>
<p>b)	How to read and use the Explain Plan</p>
<ol>
<li>Cost: An estimated measure of resource consumption (lower is better, but this is not absolute).</li>
<li>Access path: Whether the engine uses a full table scan, index scan, or nested loop.</li>
<li>Join methods: Nested loop, hash join, or merge join â€” each has different performance implications depending on data size and indexing.</li>
<li>Order of operations: The execution starts from the most indented line upward, this is also reflected in the sequence number.
By comparing the plan to your intended logic, you can identify inefficiencies such as unnecessary full table scans or expensive join orders. This is also an extremely useful view to help you recognise if you are on the right track when you are adjusting and optimising your query.</li>
</ol>
<ol start="2">
<li>Typical Issues for non-optimised SQL and solutions</li>
</ol>
<p>a)	Poorly written SQL Statement</p>
<ol>
<li>Using SELECT * from large table
Bad example ðŸš« Do you really need them all?</li>
</ol>
<p>Good example âœ…Only take the columns needed for transformation/migration
2)	Use â€˜LEFT JOIN + WHERE condition IS NOT NULLâ€™ instead of INNER JOIN
Bad example ðŸš« If in table departments there is no null dept_name value,
Good example âœ… then the query above is equivalent to more efficient INNER JOIN</p>
<ol start="3">
<li>Join same table multiple times/Create multiple very similar CTEs and join on them
Bad example ðŸš«</li>
</ol>
<p>Good example âœ… Use CASE WHEN and GROUP BY instead, try to cut down the level of aggregation:</p>
<ol start="4">
<li>Inefficient JOIN: not utilize different cardinality of tables
Cardinality refers to the number of distinct values in a column:</li>
</ol>
<ul>
<li>High cardinality: The column has many unique values, and each value appears only a few times. Examples: customer_id, order_id, email;</li>
<li>Low cardinality: The column has only a few distinct values, and many rows share the same value. Examples: country_id, gender, status.</li>
</ul>
<p>When a low-cardinality column is used in a WHERE or JOIN condition, it has weak filtering power â€” even if it has an index, the database might still scan a large portion of the table. In contrast, a high-cardinality column provides strong selectivity and allows the optimizer to quickly narrow down the relevant rows.</p>
<p>When the database decides the join order, it prefers to process the table that can reduce the data volume as early as possibleâ€”so tables with high cardinality and high selectivity should be used as the driving tables, and tables with low cardinality (such as country or status) should be joined later, because they tend to produce large intermediate result sets.</p>
<p>Thatâ€™s why we need to keep in mind that the optimizer might assume that starting the hash join from the small table country is cheaper (because the table itself is small), but it overlooks the fact that its low cardinality causes the query to scan the entire orders tableâ€”thatâ€™s why we need to check explain plan to see if it chooses full scan in this case.</p>
<p>Bad example ðŸš« If table country only has a few distinct values (low cardinality) and without any filtering power, the join may start the join from table country and produces huge intermediate sets and forces full scan of table order.</p>
<p>Good example âœ… If possible, apply a filter, and the optimizer can estimate the selectivity more accurately, as it realizes that only part of orders belongs to â€˜USâ€™, and it can use the index (if added) on o.country_id to limit the scan of large table order.</p>
<ol start="5">
<li>Overuse DISTINCT
Bad example ðŸš« DISTINCT masks duplicate logic errors from bad join, but the engine still processes all rows before deduplication â€” heavy sort or hash step.</li>
</ol>
<p>Good example âœ… Identify and remove duplication at the source (e.g., incorrect joins or UNIONs) rather than applying DISTINCT as a patch.</p>
<ol start="6">
<li>Complex subquery
Bad example ðŸš« Inefficient nested subqueries</li>
</ol>
<p>Good example âœ… Fix by using joins or CTE</p>
<ol start="7">
<li>Using NOT IN instead of NOT EXISTS
Bad example ðŸš« If the subquery returns 1 NULL, the entire where condition fails (if one value ever equals to NULL? SQL considers it as unknown), so no row returned for the whole query.</li>
</ol>
<p>Good example âœ… In EXISTS, each comparison is evaluated row by row using the = operator. Since NULL is not equal to any value (including another NULL), such rows never satisfy the match condition, so the result will not be disrupted by NULL value.</p>
<p>Example matrix for understanding (if employees.dept_id = 30):
Subquery dept_id values	NOT IN result	NOT EXISTS result
{10, NULL}	filtered out	returned
{10, 20}	returned	returned</p>
<p>b)	Index Missing or Inefficient Usage
Indexes are one of the most important tools to improve SQL performance. They allow the database to locate rows quickly without scanning the entire table.
Issue	Explain plan Key Phrase	Why itâ€™s bad	How to Fix it	Before Example	After Example
Completely Missing Index	TABLE ACCESS FULL	Full table scan instead of index scan will slow down the performance.	Create index on columns which used in:</p>
<ul>
<li>Where</li>
<li>Join 	SELECT * FROM employees WHERE emp_id = 123;	CREATE INDEX emp_id_idx ON employees(emp_id);</li>
</ul>
<p>SELECT * FROM employees WHERE emp_id = 123;
Composite Index Missing	TABLE ACCESS FULL;
INDEX RANGE SCAN on partial column	Result in suboptimal query performance as it does not leverage multiple single-column indexes effectively.	Create a composite (multi-column) index matching the filter or join condition order.	CREATE INDEX orders_cust_date_idx ON orders(customer_id)</p>
<p>SELECT * FROM orders WHERE customer_id = 10 AND order_date = DATE &lsquo;2025-01-01&rsquo;;	CREATE INDEX orders_cust_date_idx ON orders(customer_id, order_date);</p>
<p>SELECT * FROM orders WHERE customer_id = 10 AND order_date = DATE &lsquo;2025-01-01&rsquo;;
Function Use on Indexed columns	TABLE ACCESS FULL;
FUNCTION in filter predicate	Using functions on indexed columns prevents the use of indexes.	Use a function-based index	CREATE INDEX emp_lastname_upper_idx ON employees(last_name);</p>
<p>SELECT * FROM employees WHERE UPPER(last_name) = &lsquo;SMITH&rsquo;;	CREATE INDEX emp_lastname_upper_idx ON employees(UPPER(last_name));</p>
<p>SELECT * FROM employees WHERE UPPER(last_name) = &lsquo;SMITH&rsquo;;</p>
<ol>
<li>
<p>How Index Works and Why It Speeds Up Queries?
An index is essentially a sorted structure that maps key column values to physical row locations.
When a query filters or joins on an indexed column, the database can:
â€¢	Use the index to quickly locate relevant rows (INDEX RANGE SCAN)
â€¢	Avoid scanning every row in the table (FULL TABLE SCAN)
This reduces I/O and CPU usage, especially on large tables, because only the subset of relevant rows is read.</p>
</li>
<li>
<p>Guideline for index setup:
â€¢	Columns in WHERE and JOIN condition clauses â†’ high-priority index candidates
â€¢	Highly selective columns first in composite indexes</p>
</li>
<li>
<p>How to know if the newly added index helps or not?
Check the execution plan:
â€¢	INDEX RANGE SCAN or INDEX UNIQUE SCAN â†’ index is used
â€¢	FULL TABLE SCAN â†’ index is ignored
Other indicators:
â€¢	Query runtime/cost decreases after adding the index
â€¢	Number of logical reads drops
Notice that an index is not automatically helpful if:
â€¢	Queries wrap the indexed column in a function (WHERE UPPER(indexed_column) = &lsquo;ALICE&rsquo;)
â€¢	Column has very low cardinality (e.g., a boolean column which only has T and F two values)</p>
</li>
<li>
<p>Shall I use Single vs. Composite Index?
â€¢	Single-column index: best for queries filtering or sorting on one column.
â€¢	Composite index (multi-column): effective when queries filter on multiple columns together.
o	Example: WHERE a = ? AND b = ? â†’ composite index on (a, b) is more efficient than two separate indexes.
o	Order matters: the first column should be with the highest cardinality or most commonly filtered, it would be the ideal column to create index on.</p>
</li>
<li>
<p>INDEX SCAN variants and how to optimise?
Execution plans can show different scan types:
â€¢	INDEX UNIQUE SCAN: single-row lookup using a unique or primary key index.
â€¢	INDEX RANGE SCAN: range search on an ordered index.
â€¢	INDEX FULL SCAN: scanning the entire index; sometimes faster than a table scan if the index is smaller.
â€¢	INDEX FAST FULL SCAN: index-only scan for queries that do not require table columns.</p>
</li>
<li>
<p>What to do if the execution plan ignores a new index?
â€¢	Check statistics: stale statistics can mislead the optimizer
EXEC DBMS_STATS.GATHER_TABLE_STATS(&lsquo;schema&rsquo;,&rsquo;table&rsquo;);
EXEC DBMS_STATS.GATHER_INDEX_STATS(&lsquo;schema&rsquo;,&lsquo;index_name&rsquo;);
â€¢	Check query expressions: functions, implicit conversions, or mismatched data types may prevent index usage.
â€¢	Review selectivity: low-selectivity columns may not be used; consider filtering more selective columns first.
â€¢	Use index hints cautiously:
Use SELECT /*+ INDEX(table index_name) */ &hellip;
Only if the optimizer consistently ignores a useful index.
â€¢	Check plan after changes: always verify the execution plan after adding or modifying indexes to ensure they are actually being used.</p>
</li>
</ol>
<p>c)	Hintsâ€”Last Resort
SQL hints are directives embedded in a query that influence the optimizerâ€™s execution plan. They donâ€™t change the query result but can force specific behaviour and overwrite original explain plan when the optimizerâ€™s default choice isnâ€™t optimal.</p>
<ol>
<li>How does hint work?
Normally, the optimizer determines the most efficient execution plan based on available statistics and cost estimations. However, when statistics are incomplete, or the data distribution is skewed, the optimizer may choose a suboptimal path.
Hints explicitly instruct the optimizer to use a specific plan component (e.g., index, parallelism etc.). Hints apply only to the statement where they appear, and their effect is visible in the EXPLAIN PLAN.</li>
</ol>
<p>Index Hints</p>
<p>This tells the optimizer to use a specific index emp_dept_idx on the table e.
It is useful when the optimizer ignores an available index because of outdated statistics or complex conditions.
If emp_dept_idx is an index on column department_id, this hint forces an index range scan instead of a full table scan.</p>
<p>Parallelism Hints
Parallelism hints help because they tell the database optimizer to divide a large workload into smaller chunks and execute them simultaneously across multiple CPU cores or processes. It can significantly speed up large analytical or batch operations in this way.
Table-level parallelism:</p>
<p>PARALLEL(4) means using 4 parallel execution servers, it requests 4 parallel execution servers for the employees table
Each process scans a portion of the table concurrently, and results are merged.
Works best for large table scans and aggregation-heavy queries.
Statement-level parallelism:</p>
<p>This hint applies parallelism to the entire SQL operation, not just one table.
Parallel Index Scan:</p>
<p>This hint forces parallel index range scan using 8 parallel processes on index sales_idx.</p>
<p>When shall we use hint?
Hints should be a last resort, not a first choice.
They are useful when statistics are correct but the optimizer still makes a poor choice.
Avoid overusing hintsâ€”they make queries less adaptable to schema or data changes.
DO NOT use PARALLEL on small tablesâ€”it can cause contention and excessive overhead.</p>
<p>d)Incomplete Statistics
Even after you have fixed all the poor query, missing index etc., the explain plan still wonâ€™t show the improvement. This could be because the stale optimizer statistics of table could lead to faulty information and generate suboptimal execution plans.</p>
<ol>
<li>
<p>Most common cause
â€¢	Tables or indexes were recently updated (INSERT/UPDATE/DELETE) but not analyzed.
â€¢	â€˜DBMS_STATSâ€™ has not been run for a long time.</p>
</li>
<li>
<p>Solutions
â€¢	Gather fresh statistics for affected tables and indexes:
â€¢	Check table for missing statistics:</p>
</li>
</ol>

          
          
          
        </div>
        
          
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
    
    
      
    
    
      
      
        
      
      <img
        class="!mt-0 !mb-0 h-24 w-24 rounded-full me-4"
        width="96"
        height="96"
        alt="Yao Xiang"
        src="/blog/img/Me_hu_13130d4dbf236dae.jpg"
        data-zoom-src="/blog/img/Me.jpg">
    
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Yao Xiang
      </div>
    
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/Gambos"
          target="_blank"
          aria-label="Github"
          title="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.linkedin.com/in/yao-xiang/"
          target="_blank"
          aria-label="Linkedin"
          title="Linkedin"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></span></a
        >
      
    
  </div>

</div>
  </div>
</div>

  

  

  
    <div class="mb-2"></div>
  

        
        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/blog/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_posts\test.md"
          data-oid-likes="likes_posts\test.md"></script>
      
    </section>

    
    <footer class="pt-1 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-4">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span class="flex flex-col">
          
        </span>
        <span class="flex flex-col items-end">
          
            <a
              class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/blog/posts/test-copy/">
              <span class="leading-6">
                My Second Article&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
              </span>
            </a>
            
              <span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-11-19T00:00:00&#43;00:00">November 19, 2025</time>
              </span>
            
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">
    
    

    
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/blog/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="http://localhost:1313/blog/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
